前端不可避免会和移动端、服务端之间有数据的交互，大家对于数据之间的编解码相关概念不清晰，会导致数据无法正常交互。今天，针对编解码相关概念，进行一次梳理。本节主要讲解编码格式、base64、urlencode三个主题。
# 编码格式
本节主要讲解ASCII，GB2312，Unicode和UTF-8以及它们之间的转换。
## ASCII
上个世纪60年代，美国制定了一套字符编码，对英语字符与二进制位之间的关系，做了统一规定。这被称为 ASCII 码。ASCII 码一共规定了128个字符的编码，比如空格SPACE是32（二进制00100000），大写的字母A是65（二进制01000001）。这128个符号（包括32个不能打印出来的控制符号），只占用了一个字节的后面7位，最前面的一位统一规定为0。    
后来为了满足更多地区的字符编码的需求，127号之后的位置也被编码了字符，包含了127号之后的ASCII码被称为扩展ASCII码。
## GB2312
一个字节最多只能编码256个字符，对于世界上的语言字符来说远远不够，比如中文的汉字。因此中国采用了GB2312、GBK、GB18030等双字节字符集(DBCS)的编码方案，还有各个地区和语言采用了各自的编码方案，理论上最多可以表示 256 x 256 = 65536 个符号，编码方案不统一的问题就造成了很大的困扰。
## Unicode
世界上存在着多种编码方式，同一个二进制数字可以被解释成不同的符号。因此，要想打开一个文本文件，就必须知道它的编码方式，否则用错误的编码方式解读，就会出现乱码。为什么电子邮件常常出现乱码？就是因为发信人和收信人使用的编码方式不一样。    

面对这种困扰的局面，国际标准化组织(ISO)决定来解决这个问题，他们做了一个包含了地球上所有文化、字母、符号的编码方案Unicode，并且统一采用双字节，对于原来的单字节的符号，低位编码不变，扩展其高位为0变为双字节符号，这样就解决了标准与统一的问题。

但是Unicode也有一些问题，Unicode 只是一个符号集，它只规定了符号的二进制代码，却没有规定这个二进制代码应该如何存储。    
这里就有两个严重的问题，第一个问题是，如何才能区别 Unicode 和 ASCII ？计算机怎么知道三个字节表示一个符号，而不是分别表示三个符号呢？第二个问题是，我们已经知道，英文字母只用一个字节表示就够了，如果 Unicode 统一规定，每个符号用三个或四个字节表示，那么每个英文字母前都必然有二到三个字节是0，这对于存储来说是极大的浪费，文本文件的大小会因此大出二三倍，这是无法接受的

它们造成的结果是：1）出现了 Unicode 的多种存储方式，也就是说有许多种不同的二进制格式，可以用来表示 Unicode。2）Unicode 在很长一段时间内无法推广，直到互联网的出现。
## UTF-8
互联网的普及，强烈要求出现一种统一的编码方式。UTF-8 就是在互联网上使用最广的一种 Unicode 的实现方式。其他实现方式还包括 UTF-16（字符用两个字节或四个字节表示）和 UTF-32（字符用四个字节表示），不过在互联网上基本不用。重复一遍，这里的关系是，UTF-8 是 Unicode 的实现方式之一。      

UTF-8 最大的一个特点，就是它是一种变长的编码方式。它可以使用1~4个字节表示一个符号，根据不同的符号而变化字节长度。    
UTF-8 的编码规则很简单，只有二条：    
1）对于单字节的符号，字节的第一位设为0，后面7位为这个符号的 Unicode 码。因此对于英语字母，UTF-8 编码和 ASCII 码是相同的。    
2）对于n字节的符号（n > 1），第一个字节的前n位都设为1，第n + 1位设为0，后面字节的前两位一律设为10。剩下的没有提及的二进制位，全部为这个符号的 Unicode 码。
# BASE64
Base64是网络上最常见的用于传输8Bit字节码的编码方式之一，Base64就是一种基于64个可打印字符来表示二进制数据的方法。     

什么是“可打印字符”呢？为什么要用它来传输8Bit字节码呢？在回答这两个问题之前我们有必要来思考一下什么情况下需要使用到Base64？Base64一般用于在HTTP协议下传输二进制数据，由于HTTP协议是文本协议，所以在HTTP协议下传输二进制数据需要将二进制数据转换为字符数据。然而直接转换是不行的。因为网络传输只能传输可打印字符。什么是可打印字符？在ASCII码中规定，0-31、128这33个字符属于控制字符，32~127这95个字符属于可打印字符，也就是说网络传输只能传输这95个字符，不在这个范围内的字符无法传输。那么该怎么才能传输其他字符呢？其中一种方式就是使用Base64。    

然而，标准的Base64并不适合直接放在URL里传输，因为URL编码器会把标准Base64中的“/”和“+”字符变为形如“%XX”的形式，而这些“%”号在存入数据库时还需要再进行转换，因为ANSI SQL中已将“%”号用作通配符。
为解决此问题，可采用一种用于URL的改进Base64编码，它不仅在末尾去掉填充的'='号，并将标准Base64中的“+”和“/”分别改成了“-”和“_”，这样就免去了在URL编解码和数据库存储时所要作的转换，避免了编码信息长度在此过程中的增加，并统一了数据库、表单等处对象标识符的格式。
# urlencode
为当字符串数据以url的形式传递给web服务器时，字符串中是不允许出现空格和特殊字符的。因为 url 对字符有限制，比如把一个邮箱放入 url，就需要使用 urlencode 函数，因为 url 中不能包含 @ 字符。    url转义其实也只是为了符合url的规范而已。因为在标准的url规范中中文和很多的字符是不允许出现在url中的。     

哪些字符是需要转化的呢？
1. ASCII 的控制字符    
这些字符都是不可打印的，自然需要进行转化。
2. 一些非ASCII字符    
这些字符自然是非法的字符范围。转化也是理所当然的了。
3. 一些保留字符    
很明显最常见的就是“&”了，这个如果出现在url中了，那你认为是url中的一个字符呢，还是特殊的参数分割用的呢？
4. 一些不安全的字符    
例如：空格。为了防止引起歧义，需要被转化为“+”。   
    
通过urlencode的转化规则和目的，我们也很容易的看出，urleocode是基于字符编码的。同样的一个汉字，不同的编码类型，肯定对应不同的urleocode的串。gbk编码的有gbk的encode结果。
apache等服务器，接受到字符串后，可以进行decode，但是还是无法解决编码的问题。编码问题，还是需要靠约定或者字符编码的判断解决。
因此，urleocode只是为了url中一些非ascii字符，可以正确无误的被传输，至于使用哪种编码，就不是encode所关心和解决的问题了。
编码问题，不是urlencode所要解决的。

> 参考文档：    
CSDN：https://blog.csdn.net/Deft_MKJing/article/details/79460485    
百度百科：https://baike.baidu.com/item/base64/8545775?fr=aladdin    
百度百科：https://baike.baidu.com/item/urlencode/8317412?fr=aladdin